(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9aed6a76"],{2083:function(e,t,n){"use strict";n("b04d")},"2c1e":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=n("9846"),r=n.n(a),s=function(e){return Object(c["pushScopeId"])("data-v-079e5c67"),e=e(),Object(c["popScopeId"])(),e},o={class:"order-page"},l={class:"common-back flex-middle"},i={class:"order-content"},d={class:"total-reward flex"},b={class:"flex left-cont"},u={class:"item flex"},p=s((function(){return Object(c["createElementVNode"])("img",{src:r.a,alt:"",class:"icon"},null,-1)})),m={class:"flex-item"},g={class:"tit"},O={class:"num"},f=s((function(){return Object(c["createElementVNode"])("div",{class:"flex-item flex-middle"},null,-1)})),j={class:"flex-center"},v=s((function(){return Object(c["createElementVNode"])("div",{class:"line-pic"},null,-1)})),h={class:"list"},A={class:"role-info flex"},k={class:"img-box flex-center"},E={class:"flex-item"},w={class:"name text-ellipsis"},V={class:"level"},N={class:"score"},y={class:"tokenid"},x={class:"result-info"},B={class:"tit"},C={class:"result-text"},_={key:0,class:"win"},L={key:1,class:"fail"},S={class:"role-info flex"},I={class:"img-box flex-center"},D={class:"flex-item"},R={class:"name text-ellipsis"},M={class:"level"},T={class:"score"},H={class:"tokenid"},J={class:"result-info"},F={class:"tit"},P={class:"result-text"},q={key:0,class:"win"},U={key:1,class:"fail"},X={class:"sort-box"},$={class:"tit"},Q={class:"value"},K={key:0,class:"common-page flex-middle"},z=s((function(){return Object(c["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Object(c["createElementVNode"])("path",{d:"M3 11.996L9 6L10.41 7.42L6.85 10.976H21V12.976H6.81L10.41 16.58L9 18L3 11.996Z"})],-1)})),G=[z],W={class:"page-num"},Y=s((function(){return Object(c["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[Object(c["createElementVNode"])("path",{d:"M21 12.004L15 18L13.59 16.58L17.15 13.024H3V11.024H17.19L13.59 7.42L15 6L21 12.004Z"})],-1)})),Z=[Y];function ee(e,t,n,a,r,s){var z=Object(c["resolveComponent"])("el-button"),Y=Object(c["resolveComponent"])("hero-picture"),ee=Object(c["resolveComponent"])("hero-name");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",{class:"back-btn flex-middle",onClick:t[0]||(t[0]=function(t){return e.$router.go(-1)})},Object(c["toDisplayString"])(e.$t("game.返回")),1)]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("div",u,[p,Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("p",g,Object(c["toDisplayString"])(e.$t("game.Unclaimed income"))+"(BNX)",1),Object(c["createElementVNode"])("p",O,Object(c["toDisplayString"])(e.reward.bonus),1)])])]),f,Object(c["createElementVNode"])("div",j,[Object(c["createVNode"])(z,{type:"primary",class:"btn btn-primary-bg",disabled:e.disabled,loading:e.disabled,onClick:e.sign},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("game.Claim Reward")),1)]})),_:1},8,["disabled","loading","onClick"])])]),v,Object(c["createElementVNode"])("div",h,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.list,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"row flex",key:t.id},[Object(c["createElementVNode"])("div",A,[Object(c["createElementVNode"])("div",k,[Object(c["createVNode"])(Y,{heroAddress:t.p1_r_addr},null,8,["heroAddress"])]),Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",w,[t.p1_c_name?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.p1_c_name),1)],64)):(Object(c["openBlock"])(),Object(c["createBlock"])(ee,{key:1,heroAddress:t.p1_r_addr},null,8,["heroAddress"]))]),Object(c["createElementVNode"])("div",V,"Lv."+Object(c["toDisplayString"])(t.p1_level),1),Object(c["createElementVNode"])("div",N,Object(c["toDisplayString"])(e.$t("game.本場積分"))+": "+Object(c["toDisplayString"])(t.p1_score),1),Object(c["createElementVNode"])("div",y,"TokenID : "+Object(c["toDisplayString"])(t.p1_token_id?t.p1_token_id.substring(0,4)+"***"+t.p1_token_id.substring(t.p1_token_id.length-4,t.p1_token_id.length):""),1)]),Object(c["createElementVNode"])("div",x,[Object(c["createElementVNode"])("div",B,Object(c["toDisplayString"])(e.$t("game.Status")),1),Object(c["createElementVNode"])("div",C,[1===t.p1_status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",_,"WIN")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",L,"FAIL"))])])]),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("div",I,[Object(c["createVNode"])(Y,{heroAddress:t.p2_r_addr},null,8,["heroAddress"])]),Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("div",R,[t.p2_c_name?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.p2_c_name),1)],64)):(Object(c["openBlock"])(),Object(c["createBlock"])(ee,{key:1,heroAddress:t.p2_r_addr},null,8,["heroAddress"]))]),Object(c["createElementVNode"])("div",M,"Lv."+Object(c["toDisplayString"])(t.p2_level),1),Object(c["createElementVNode"])("div",T,Object(c["toDisplayString"])(e.$t("game.本場積分"))+": "+Object(c["toDisplayString"])(t.p2_score),1),Object(c["createElementVNode"])("div",H,"TokenID : "+Object(c["toDisplayString"])(t.p2_token_id?t.p2_token_id.substring(0,4)+"***"+t.p2_token_id.substring(t.p2_token_id.length-4,t.p2_token_id.length):""),1)]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("div",F,Object(c["toDisplayString"])(e.$t("game.Status")),1),Object(c["createElementVNode"])("div",P,[1===t.p2_status?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",q,"WIN")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",U,"FAIL"))])])]),Object(c["createElementVNode"])("div",X,[Object(c["createElementVNode"])("div",$,Object(c["toDisplayString"])(e.$t("game.擂臺賽場次")),1),Object(c["createElementVNode"])("div",Q,Object(c["toDisplayString"])(t.log_id),1)])])})),128))]),e.total&&Math.ceil(e.total/e.limit)>1?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",K,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["prev",{disabled:1===e.page}]),onClick:t[1]||(t[1]=function(){return e.prevPage&&e.prevPage.apply(e,arguments)})},G,2),Object(c["createElementVNode"])("div",W,Object(c["toDisplayString"])(e.$t("index.第頁共",{page:e.page,total:Math.ceil(e.total/e.limit)})),1),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["next",{disabled:e.page===Math.ceil(e.total/e.limit)}]),onClick:t[2]||(t[2]=function(){return e.nextPage&&e.nextPage.apply(e,arguments)})},Z,2)])):Object(c["createCommentVNode"])("",!0)])])}var te=n("5530"),ne=n("1da1"),ce=(n("96cf"),n("01ea")),ae=n("5502"),re=n("47e2"),se=n("7068"),oe=n("4995"),le=n("541a"),ie=n("901e"),de=n.n(ie),be=n("56fe"),ue=n("f4a8"),pe={components:{HeroPicture:be["a"],HeroName:ue["a"]},setup:function(){var e=Object(c["getCurrentInstance"])(),t=e.proxy,n=Object(ae["b"])(),a=Object(re["b"])(),r=a.t,s=Object(c["reactive"])({config:ce["a"],address:Object(c["computed"])((function(){return n.state.accounts})),web3:Object(c["computed"])((function(){return n.state.provider})),list:[],page:1,limit:20,total:0,reward:{},disabled:!1,feeContract:null,userBalance:0,feeType:501,feeConfig:[],initContract:function(){s.web3.eth.getBalance(s.address).then((function(e){s.userBalance=e})),s.feeContract=new s.web3.eth.Contract(le,ce["a"].FeeAddress),s.getReward(),s.getList()},sign:function(){var e=Object(ne["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s.disabled=!0,s.address){e.next=5;break}return se["a"].error({title:r("index.連線錢包")}),s.disabled=!1,e.abrupt("return");case 5:return e.next=7,s.feeContract.methods.getFeeConfig(s.feeType).call();case 7:if(s.feeConfig=e.sent,s.feeConfig.length){e.next=12;break}return se["a"].error({title:r("game.系統操作頻繁，請稍後")}),s.disabled=!1,e.abrupt("return");case 12:if(!new de.a(s.userBalance).lt(s.feeConfig[0])){e.next=16;break}return se["a"].error({title:r("game.手續費不足")}),s.disabled=!1,e.abrupt("return");case 16:t.$http.post(t.$dungeonURL+"/v1/user/getaddressnonce",{GoldAddress:s.address}).then((function(e){var t=e.data.nonce+"";s.web3.eth.personal.sign(s.web3.utils.utf8ToHex(t),s.address,"password").then((function(e){var n=e;s.draw(n,t)})).catch((function(){s.disabled=!1}))})).catch((function(){s.disabled=!1}));case 17:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),draw:function(){var e=Object(ne["a"])(regeneratorRuntime.mark((function e(n,c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.disabled=!0,t.$http.post(t.$dungeonURL+"/v1/lt/draw",{Address:s.address,ASign:n,Nonce:c}).then((function(e){oe["a"].success({message:r("game.Claimed successfully"),type:"success",offset:240}),s.getReward(),s.getList(),s.payGas(e.data.uuid)})).catch((function(e){s.disabled=!1,console.log(e)}));case 2:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}(),payGas:function(){var e=Object(ne["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.feeContract.methods.paymentBnb(t,s.feeType).estimateGas({from:s.address,value:s.feeConfig[0]});case 2:n=e.sent,console.log("gas",n),s.feeContract.methods.paymentBnb(t,s.feeType).send({from:s.address,value:s.feeConfig[0]}).then((function(e){s.disabled=!1,oe["a"].success({message:r("game.手續費支付成功"),type:"success",offset:240})})).catch((function(e){s.disabled=!1,console.log(e),se["a"].error({title:r("game.手續費支付失敗")})}));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getReward:function(){t.$http.post(t.$dungeonURL+"/v1/lt/bonus",{Address:s.address}).then((function(e){s.reward=e.data}))},getList:function(){t.$http.post(t.$dungeonURL+"/v1/lt/battleLog",{Page:s.page,Address:s.address,Limit:s.limit}).then((function(e){s.list=e.data.lists,s.total=e.data.total_amount}))},prevPage:function(){1!==s.page&&(s.page--,s.getList())},nextPage:function(){s.page!==Math.ceil(s.total/s.limit)&&(s.page++,s.getList())}});s.address&&s.initContract(),Object(c["watch"])((function(){return s.address}),(function(e){e&&s.initContract()}));var o=Object(c["toRefs"])(s);return Object(te["a"])({},o)}},me=(n("2083"),n("6b0d")),ge=n.n(me);const Oe=ge()(pe,[["render",ee],["__scopeId","data-v-079e5c67"]]);t["default"]=Oe},9846:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJaSURBVHgB5ZRPbtNAFMbfGzfAgtCYE7jiADU7dkmkIqFKiLDompQLwA0S3wBOQNIVqhBERUIVAWJ2LMMeVWaP5AShRo3jeXzj0DQkaWwCK/okZ+zMm983788M0YWzsFpy8ThZ/TmrI6AFS+iVEJXMtxKq5/d8L21dJgEDB7BDIpvMTBBhFhIm5eX3Pnh/JTANH3PxCzRpMhKstKrnn7/zVhI4g9OmgYk+hZ8JmFEJInn5dqGIWgrX3KGYXYoVUwT0SJFEgONdRorNu475oR5Srb99p5ZZwMB5CHjELkA+GSjg5uHxCEG8x1Zgt9oN+HyUEdf7W9u11BSFFcAvqw6mXI6xa1G7ItKQGJPCXTwBa66YbzOrTwbXiQpE1kkJcwXSxy3b93unvLW5kHJrSAu54xwrjiP1Van4MdL0BMCW1tREDVzAHPg0p2AtSkvR9/tb92iEtCB8iiymIfavqbh+0H4qMW/wiAL78DCQ4eAmfMrr79/sUor9lqLw7u0qkM9Mh7OJQJu0qL4eHm9Mh5343qo4dKXXm/1/aQT263YDheuaomKH/KtTCoquPppdaJEupsHnBIzpwaUyOqSbdE2EU5CMljPrd+3TQZMy2JyA7bd6IrkywF1KaqEIfe7QirbwHCQiP5QR+WwOE3q/GLqV+nmQbzd2qqFTKSyaW35VuFgk49OM4ocYuyLcRxsHaNc+KhRgjw9IYt8+euH9scBEZICzIab3aXwH4dKbOODato/2V7vsJiImfJXrgOsmi8yVLZIKzyywSAQrPfvLfp3+tYXOTvG8gv6f9hM3LjBh89rJGAAAAABJRU5ErkJggg=="},b04d:function(e,t,n){}}]);